<!DOCTYPE HTML>
<html>
	<head>
		<title>Dashboard Panel</title>
		<!-- load jquery ui bootstrap css theme -->
		<link type="text/css" href="lib/sDashboard/example/css/bootstrap/css/custom-theme/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
		<link href="lib/sDashboard/example/css/bootstrap/bootstrap/bootstrap.css" rel="stylesheet">
		<link href="lib/sDashboard/example/css/bootstrap/css/demo.css" rel="stylesheet">
		<!--[if IE]>
		<link rel="stylesheet" type="text/css" href="lib/sDashboard/example/css/bootstrap/css/custom-theme/custom-theme/jquery.ui.1.8.16.ie.css"/>
		<![endif]-->
		<!-- load the dashboard css -->
		<link href="lib/sDashboard/example/../sDashboard.css" rel="stylesheet">
		<link href="lib/sDashboard/example/css/jquery.minitwitter.css" rel="stylesheet">
		<!-- load gitter css -->
		<link href="lib/sDashboard/example/css/gitter/css/jquery.gritter.css" rel="stylesheet"/>
		<!-- load jquery library -->
		<script src="lib/sDashboard/example/libs/jquery/jquery-1.8.2.js" type="text/javascript"> </script>
		<!-- load jquery ui library -->
		<script src="lib/sDashboard/example/libs/jquery/jquery-ui.js" type="text/javascript"> </script>
		<!-- load touch punch library to enable dragging on touch based devices -->
		<script src="lib/sDashboard/example/libs/touchpunch/jquery.ui.touch-punch.js" type="text/javascript"> </script>
		<!-- load gitter notification library -->
		<script src="lib/sDashboard/example/libs/gitter/jquery.gritter.js" type="text/javascript"> </script>
		<!-- load datatables library -->
		<script src="lib/sDashboard/example/libs/datatables/jquery.dataTables.js"> </script>
		<!-- load flotr2 charting library -->
		<!--[if IE]>
		<script language="javascript" type="text/javascript" src="lib/sDashboard/example/libs/flotr2/flotr2.ie.min.js"></script>
		<![endif]-->
		<script src="lib/sDashboard/example/libs/flotr2/flotr2.js" type="text/javascript"> </script>
 		<!-- load dashboard library -->
		<script src="lib/sDashboard/example/../jquery-sDashboard.js" type="text/javascript"> </script>
		<!-- mini twitter library -->
		<script src="lib/sDashboard/example/libs/miniTwitter/jquery.minitwitter.js" type="text/javascript"> </script>
		<!-- sample data external script file -->
		<script src="lib/sDashboard/example/libs/exampleData.js" type="text/javascript"> </script>
		<script src="lib/roslibjs/include/EventEmitter2/eventemitter2.js"></script>
		<script src="lib/roslibjs/build/roslib.js"></script>
		<!-- google maps -->
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
		<!-- example code -->
		<script type="text/javascript">
$(function() {
	function initialize() {
		if ($('#map-canvas').length)
		{
			var mapOptions = {
			  center: new google.maps.LatLng(-34.397, 150.644),
			  zoom: 8,
			  mapTypeId: google.maps.MapTypeId.ROADMAP
			};
			var map = new google.maps.Map(document.getElementById("map-canvas"),
				mapOptions);
		} else {
			setTimeout(initialize, 1000);
		}
	}
	google.maps.event.addDomListener(window, 'load', initialize);
	var ros = new ROSLIB.Ros();
	ros.on('error', function(error) {
		console.log(error);
	});
	ros.connect('ws://localhost:9090');
	var msg = " message not receive";
	function update()
	{
		$("#myDashboard").sDashboard("setContentById", "text000", msg);
		setTimeout(update, 1000);
	}
	$.getJSON('file/test2-panel.json', function(data) {
		var djson = data.widget;
		for (var i in djson)
		{
			if (djson[i].widgetContent == "myExampleData.tableWidgetData")
			{
				djson[i].widgetContent = myExampleData.tableWidgetData;
			}
			if (typeof djson[i].widgetContent == "undefined" || typeof djson[i].widgetContent.data == "undefined")
			{
				continue;
			}
			switch (djson[i].widgetContent.data)
			{
			case "myExampleData.bubbleChartData":
				djson[i].widgetContent.data = myExampleData.bubbleChartData;
				break;
			case "myExampleData.pieChartData":
				djson[i].widgetContent.data = myExampleData.pieChartData;
				break;
			case "myExampleData.barChartData":
				djson[i].widgetContent.data = myExampleData.barChartData;
				break;
			case "myExampleData.lineChartData":
				djson[i].widgetContent.data = myExampleData.lineChartData;
				break;
			}
			switch (djson[i].widgetContent.options)
			{
			case "myExampleData.bubbleChartOptions":
				djson[i].widgetContent.options = myExampleData.bubbleChartOptions;
				break;
			case "myExampleData.pieChartOptions":
				djson[i].widgetContent.options = myExampleData.pieChartOptions;
				break;
			case "myExampleData.barChartOptions":
				djson[i].widgetContent.options = myExampleData.barChartOptions;
				break;
			case "myExampleData.lineChartOptions":
				djson[i].widgetContent.options = myExampleData.lineChartOptions;
				break;
			}
		}
		//basic initialization example
		$("#myDashboard").sDashboard({
			dashboardData : djson,
			disableSelection : true
		});
		$("#myDashboard").bind("sdashboardorderchanged", function(e, data) {					
		});
		$("#btnAddWidget").click(function() {
			$("#myDashboard").sDashboard("addWidget", {
				widgetTitle : "Widget 7",
				widgetId : "id008",
				widgetContent : "added text widget"
			});
		});
		//Subscribing to a Topic
		var listener = new ROSLIB.Topic({
			ros : ros,
			name : '/listener',
			messageType : 'std_msgs/String'
		});
		listener.subscribe(function(message) {
			msg = 'Received message on ' + listener.name + ': ' + message.data;
			//listener.unsubscribe();
		});
		update();
	});
});
		</script>
	</head>
	<body>
		<div style="padding-top: 5px;">
			<button class="btn" id="btnAddWidget">
				Add Widget
			</button>
		</div>
		<ul id="myDashboard"></ul>
	</body>
</html>

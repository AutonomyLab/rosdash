<!DOCTYPE html>
<html>
	<head>
		<title>Dashboard Diagram</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<meta charset=utf-8 />
		<script src="http://cytoscape.github.io/cytoscape.js/api/cytoscape.js-latest/cytoscape.min.js"></script>
		<script src="lib/roslibjs/include/EventEmitter2/eventemitter2.js"></script>
		<script src="lib/roslibjs/build/roslib.js"></script>
		<script src="rosdash.js"></script>
		<style>
body { 
  font: 14px helvetica neue, helvetica, arial, sans-serif;
}
#cy {
  height: 100%;
  width: 100%;
  position: absolute;
  left: 0;
  top: 100;
}
		</style>
	</head>
	<body>
		<input type="text" name="host" id="host" value="localhost">
		<input type="text" name="topic" id="topic" value="">
		<input type="button" id="addtopic" value="add topic">
		<input type="button" id="addblock" value="add block">
		<input type="button" id="removeblock" value="remove block">
		<input type="button" id="readblocks" value="read block">
		<div id="cy"></div>
		<script type="text/javascript">
$(function() {
	$("#addtopic").click(function ()
	{
		ROSDASH.addTopic($("#topic").val());
	});
	$("#addblock").click(function ()
	{
		ROSDASH.addBlock($("#topic").val());
	});
	$("#removeblock").click(ROSDASH.removeBlockCallback);
	$("#readblocks").click(ROSDASH.readBlockCallback);
	ROSDASH.initJson();
	var style = ROSDASH.default_style;
	var element = ROSDASH.default_element;
	ROSDASH.connectROS($("#host").val(), "9090");
	var empty_ele = {nodes: new Array(), edges: new Array()};
	//$.getJSON('file/test3-diagram.json', function(data)
	//var json = data.data;
	//var ele = ROSDASH.transformToElements(json);
	$('#cy').cytoscape({
		layout: {
			name: 'circle'
		},
		style: style,
		elements: empty_ele, //ele, //ROSDASH.default_element2,
		ready: function()
		{
			window.cy = this;
			$.getJSON('file/test4-diagram.json', function(data)
			{
				ROSDASH.loadDiagram(data);
			});
			window.cy.elements().unlock();
			window.cy.elements().unselect();
			ROSDASH.blockMoveCallback();
			ROSDASH.connectBlocksCallback();
			ROSDASH.getROSNames(ROSDASH.ros);
		}
	});
});
		</script>
	</body>
</html>
